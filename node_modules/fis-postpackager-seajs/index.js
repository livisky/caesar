"use strict";module.exports=function(s,t,i,e){var a=fis.config.get("seajs",{});a.alias=a.alias||{},fis.util.map(s.map.res,function(s,t){a.alias[s]=t.uri});var n=fis.file(fis.project.getProjectPath(),"sea-config.js");n.setContent("seajs.config("+JSON.stringify(a,null,e.optimize?null:4)+");"),s.pkg[n.subpath]=n;var r='<script src="'+n.getUrl(e.hash,e.domain)+'"></script>';fis.util.map(s.src,function(s,t){if(t.isHtmlLike){var i=t.getContent();/\bseajs\.use\s*\(/.test(i)&&(i=i.replace(/<\/head>/,r+"\n$&"),t.setContent(i))}})};